<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>Deluxury Autos</title>

    <style>
      body {
        font-family: Arial, sans-serif;
        margin: 0;
        padding: 0;
        background: #111;
        color: #ddd;
      }

      html {
        scroll-behavior: smooth;
      }
      header {
  background: rgba(0, 0, 0, 0.85);
  color: white;
  padding: 20px 40px; /* Added horizontal padding */
  display: flex;
  justify-content: space-between;
  align-items: center;
  position: fixed;
  width: 100%;
  top: 0;
  z-index: 1000;
  box-sizing: border-box; /* Ensures padding doesn't break layout */
}

      .logo {
        font-size: 30px;
        font-weight: bold;
        text-transform: uppercase;
        margin-right: 20px;
      }
      nav ul {
  list-style: none;
  display: flex;
  gap: 20px;
  align-items: center;
  margin: 0;
  padding: 0;
}

      nav ul li a {
        color: white;
        text-decoration: none;
        font-weight: bold;
        transition: 0.3s;
      }

      nav ul li a:hover {
        color: #aaa;
      }

      nav ul li a img {
        width: 30px;
        height: 30px;
        filter: invert(100%);
      }

      nav .btn {
        background: white;
        color: black;
        padding: 12px 24px;
        text-decoration: none;
        font-weight: bold;
        border-radius: 5px;
        transition: 0.3s;
      }

      nav .btn:hover {
        background: #444;
        color: white;
      }

      .hero {
        height: 100vh;
        background: url("https://media4.giphy.com/media/v1.Y2lkPTc5MGI3NjExdGZ6NXkyMXYydmFseDRkNndqa3VsbXZiOXNmYjRvc3U3YTNwMWpjNyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9dg/VYvYnTWXcNIItfmHcb/giphy.gif")
          no-repeat center center/cover;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
        text-align: center;
        color: white;
        animation: fadeIn 1.5s ease-in;
      }

      .hero h1 {
        font-size: 50px;
        text-transform: uppercase;
        margin-bottom: 10px;
      }

      .btn {
        background: white;
        color: black;
        padding: 12px 24px;
        text-decoration: none;
        font-weight: bold;
        border-radius: 5px;
        transition: 0.3s;
        display: inline-block;
        margin-top: 20px;
      }

      .btn:hover {
        background: #444;
        color: white;
      }

      #features, #about, #reviews {
        padding: 80px 20px;
        text-align: center;
        background: #222;
      }

      .feature-list {
        display: flex;
        justify-content: center;
        gap: 20px;
        flex-wrap: wrap;
      }

      .feature-item {
        background: #333;
        width: 350px;
        height: 600px;
        border-radius: 10px;
        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        overflow: hidden;
        position: relative;
        transition: transform 0.3s;
        animation: fadeIn 1.5s ease-in forwards;
        opacity: 0;
      }

      .feature-item img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .feature-title {
        background: rgba(0,0,0,0.6);
        color: white;
        padding: 10px;
        font-weight: bold;
        text-align: center;
        font-size: 18px;
        position: absolute;
        top: 0;
        width: 100%;
      }

      .feature-item:hover {
        transform: scale(1.05);
      }

      .review-list {
        display: flex;
        flex-direction: column;
        gap: 30px;
        max-width: 900px;
        margin: 0 auto 40px auto;
      }

      .review-item {
        background: rgba(255,255,255,0.05);
        padding: 30px;
        border-radius: 12px;
        font-style: italic;
        box-shadow: 0 8px 30px rgba(0,0,0,0.4);
        border: 1px solid rgba(255,255,255,0.1);
      }

      #review-form {
        max-width: 600px;
        margin: 0 auto;
        display: flex;
        flex-direction: column;
        gap: 12px;
      }

      #review-form input, #review-form textarea {
        background: rgba(255,255,255,0.05);
        color: white;
        padding: 14px;
        font-size: 16px;
        border: 1px solid rgba(255,255,255,0.2);
        border-radius: 6px;
      }
      .review-item {
  background: rgba(255,255,255,0.05);
  padding: 30px;
  border-radius: 12px;
  font-style: italic;
  box-shadow: 0 8px 30px rgba(0,0,0,0.4);
  border: 1px solid rgba(255,255,255,0.1);
  position: relative; /* <-- add this */
}

      #star-rating {
        display: flex;
        flex-direction: row-reverse;
        justify-content: flex-start;
      }

      #star-rating input { display: none; }
      #star-rating label {
        font-size: 28px;
        color: #555;
        cursor: pointer;
      }

      #star-rating input:checked ~ label,
      #star-rating label:hover,
      #star-rating label:hover ~ label {
        color: gold;
      }

      #popup-ad {
  position: fixed;
  bottom: 20px;
  right: 20px;
  width: 280px;
  background: #ffc107;
  color: black;
  font-weight: bold;
  border: 2px solid red;
  padding: 16px;
  z-index: 10000;
  border-radius: 12px;
  box-shadow: 0 0 15px rgba(0,0,0,0.3);
  animation: flash 1s infinite alternate, shakeAd 0.4s ease-in-out infinite;
}
      #johnPorkCall {
  position: fixed;
  bottom: 30px;
  right: 30px;
  z-index: 9999;
  animation: shakePhone 0.5s infinite alternate;
  transition: all 0.3s ease-in-out;
}

@keyframes shakePhone {
  from { transform: rotate(-1deg); }
  to { transform: rotate(1deg); }
}

@keyframes flash {
  from { background: #ffc107; }
  to { background: #ff5c5c; }
}

      @keyframes fadeIn {
        from { opacity: 0; transform: translateY(-20px); }
        to { opacity: 1; transform: translateY(0); }
      }

      footer {
        background: #000;
        color: white;
        text-align: center;
        padding: 20px;
      }
    </style>
  </head>

  <body>
    <header>
      <div class="logo">Deluxury Autos</div>
      <nav>
        <ul>
          <li><a href="landingPage.html">Home</a></li>
          <li><a href="#features">Features</a></li>
          <li><a href="http://161.35.99.95:3000/aboutUs.html">About</a></li>
          <li><a href="http://161.35.99.95:3000/catalog.html">Catalog</a></li>
          <li><a href="http://161.35.99.95:3000/cart/orders.html">
            <img src="cart.png" alt="Cart" class="order-icon" />
          </a></li>
          <li id="login-button"><a href="http://161.35.99.95:3000/login/login.html" class="btn">Login</a></li>
          <li id="logout-button" style="display:none;"><a href="#" class="btn" onclick="logoutUser()">Logout</a></li>

          
        </ul>
      </nav>
      
    </header>

    <section class="hero">
      <h1>Luxury Redefined</h1>
      <p>Experience the elegance, performance, and sophistication of premium vehicles.</p>
      <a href="/catalog.html" class="btn">Explore Now</a>
    </section>

    <section id="features">
      <h2>Features</h2>
      <div class="feature-list">
        <div class="feature-item">
          <div class="feature-title">Precision Engineering</div>
          <img src="prec.jpg" alt="Precision Engineering" />
        </div>
        <div class="feature-item">
          <div class="feature-title">Timeless Design</div>
          <img src="timeless.jpg" alt="Timeless Design" />
        </div>
        <div class="feature-item">
          <div class="feature-title">Elite Performance</div>
          <img src="faster.jpg" alt="Elite Performance" />
        </div>
      </div>
    </section>

    <section id="about">
      <h2>About Us</h2>
      <p>At Deluxury Autos, we bring you the finest collection of luxury cars, offering an unmatched driving experience.</p>
    </section>

    <section id="reviews">
      <h2>Customer Reviews</h2>

      <div style="margin-bottom: 20px">
        <label for="filter-rating">Filter by Rating:</label>
        <select id="filter-rating">
          <option value="all">All</option>
          <option value="5">â˜…â˜…â˜…â˜…â˜…</option>
          <option value="4">â˜…â˜…â˜…â˜…</option>
          <option value="3">â˜…â˜…â˜…</option>
          <option value="2">â˜…â˜…</option>
          <option value="1">â˜…</option>
        </select>
      </div>

      <div class="review-list"></div>

      <form id="review-form">
        <input type="text" name="name" placeholder="Your Name" required />
        <textarea name="review" placeholder="Your Review" rows="4" required></textarea>
        <label>Your Rating:</label>
        <div id="star-rating">
          <input type="radio" name="rating" value="5" id="star5" /><label for="star5">â˜…</label>
          <input type="radio" name="rating" value="4" id="star4" /><label for="star4">â˜…</label>
          <input type="radio" name="rating" value="3" id="star3" /><label for="star3">â˜…</label>
          <input type="radio" name="rating" value="2" id="star2" /><label for="star2">â˜…</label>
          <input type="radio" name="rating" value="1" id="star1" /><label for="star1">â˜…</label>
        </div>
        <button type="submit">Submit Review</button>
      </form>
    </section>

    <footer>
      <p>&copy; 2025 Deluxury Autos. All Rights Reserved.</p>
    </footer>

    <div id="popup-ad" style="display: none;">
      ðŸŽ‰ Free air freshener with your $1M purchase!<br/>
      <small>Smell like success. Limited time only.</small>
      <br/>
      <button onclick="document.getElementById('popup-ad').style.display='none'"
        style="margin-top: 10px; background: #000; color: #fff; border: none; padding: 6px 12px; cursor: pointer; border-radius: 5px;">
        Close
      </button>
    </div>
     
      <div id="johnPorkCall" style="display:none;">
        <img src="ImaPork.png" alt="John Pork is calling" style="width: 300px; border-radius: 10px;" />
        <button onclick="closePorkCall()" style="
          position: absolute;
          bottom: 30px;
          left: 30px;
          background: red;
          color: white;
          font-weight: bold;
          border: none;
          padding: 10px 16px;
          border-radius: 50%;
          font-size: 18px;
          cursor: pointer;
        ">
          âœ•
        </button>
      </div>
      

      <script>
        document.addEventListener("DOMContentLoaded", () => {
          const form = document.getElementById("review-form");
          const reviewList = document.querySelector(".review-list");
          const filterSelect = document.getElementById("filter-rating");
      
          let reviews = [];
      
          async function checkIfCustomer() {
            try {
              const res = await fetch("http://161.35.99.95:3000/api/user", {
                method: "GET",
                credentials: "include"
              });
      
              if (res.ok) {
                const user = await res.json();
                document.getElementById("login-button").style.display = "none";
                document.getElementById("logout-button").style.display = "inline-block";
      
                if (user.role !== "user") {
                  form.style.display = "none";
                }
              } else {
                form.style.display = "none";
              }
            } catch (err) {
              console.error("Error checking user role:", err);
              form.style.display = "none";
            }
          }
      
          async function logoutUser() {
            try {
              await fetch("http://161.35.99.95:3000/api/logout", {
                method: "POST",
                credentials: "include"
              });
              window.location.reload();
            } catch (err) {
              console.error("Logout failed:", err);
            }
          }
      
          async function loadReviews() {
            try {
              const res = await fetch("http://161.35.99.95:3000/api/reviews");
              const data = await res.json();
              reviews = data.map(r => ({
                name: r.name,
                reviewText: r.review_text,
                rating: r.rating
              }));
              renderReviews();
            } catch (err) {
              console.error("Failed to load reviews:", err);
            }
          }
      
          function renderReviews() {
            reviewList.innerHTML = "";
            const selectedRating = filterSelect.value;
            const filtered = selectedRating === "all" ? reviews : reviews.filter(r => r.rating == selectedRating);
      
            filtered.forEach(review => {
              const item = document.createElement("div");
              item.className = "review-item";
              item.innerHTML = `
                <p style="font-size:18px;">"${review.reviewText}"</p>
                <h4>- ${review.name}</h4>
                <div style="position:absolute; top:10px; right:20px; color:gold; font-size:16px;">
                  ${"â˜…".repeat(review.rating)}${"â˜†".repeat(5 - review.rating)}
                </div>`;
              reviewList.appendChild(item);
            });
          }
      
          form.addEventListener("submit", async function (e) {
            e.preventDefault();
            const name = form.name.value.trim();
            const reviewText = form.review.value.trim();
            const ratingInput = document.querySelector('#star-rating input[type="radio"]:checked');
            const rating = ratingInput ? parseInt(ratingInput.value) : null;
      
            if (name && reviewText && rating) {
              try {
                const res = await fetch("http://161.35.99.95:3000/api/reviews", {
                  method: "POST",
                  credentials: "include",
                  headers: { "Content-Type": "application/json" },
                  body: JSON.stringify({ name, reviewText, rating })
                });
      
                if (res.ok) {
                  await loadReviews();
                  form.reset();
                } else {
                  console.error("Failed to submit review.");
                }
              } catch (err) {
                console.error("Error submitting review:", err);
              }
            }
          });
      
          filterSelect.addEventListener("change", renderReviews);
      
          // Initialize
          checkIfCustomer();
          loadReviews();
      
          // Make logoutUser available globally
          window.logoutUser = logoutUser;
        });

        function closePorkCall() {
  document.getElementById("johnPorkCall").style.display = "none";
}
setTimeout(() => {
  document.getElementById("popup-ad").style.display = "block";
}, 5000);

// Show John Pork popup after 5 seconds
setTimeout(() => {
  document.getElementById("johnPorkCall").style.display = "block";
}, 9000);

      </script>
    
